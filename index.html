<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>圖片放大縮小與顯示名稱</title>
  <style>
    .scroll-map-container {
      position: relative;
      overflow: hidden;
      width: 100%;
      height: 500px;
    }

    .scroll-map {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .map-label {
      position: absolute;
      background-color: rgba(255, 255, 255, 0.7);
      padding: 5px;
      border-radius: 5px;
      display: none; /* 默認隱藏 */
    }

    .checkbox-container {
      margin-bottom: 10px;
    }

    .checkbox-container label {
      margin-right: 15px;
    }
  </style>
</head>
<body>

<div class="checkbox-container">
  <!-- 方框控制名稱顯示與隱藏 -->
  <label><input type="checkbox" class="toggle-label" data-target="label-1"> 鉄道省</label>
  <label><input type="checkbox" class="toggle-label" data-target="label-2"> 佐原</label>
  <label><input type="checkbox" class="toggle-label" data-target="label-3"> 後楽園</label>
</div>

<div class="scroll-map-container">
  <div id="map-1" class="scroll-map">
    <!-- 地圖圖片 -->
    <img id="map-image" src="https://i0.wp.com/s3.ap-northeast-1.amazonaws.com/media.gamepedia/wp-content/uploads/sites/100/2020/12/12125702/momotetsu-map.png?ssl=1" alt="Map" style="width: 100%; height: 100%;">

    <!-- 名稱顯示在圖片上的位置 -->
    <div id="label-1" class="map-label" style="left: 700px; top: 590px;">鉄道省</div>
    <div id="label-2" class="map-label" style="left: 750px; top: 520px;">佐原</div>
    <div id="label-3" class="map-label" style="left: 680px; top: 560px;">後楽園</div>
  </div>
</div>

<!-- 引入 svg-pan-zoom 库 -->
<script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.0/dist/svg-pan-zoom.min.js"></script>
<script>
  // 初始化圖片的放大縮小與拖動功能
  const mapElement = document.getElementById('map-1');
  
  const panZoom = svgPanZoom(mapElement, {
    zoomEnabled: true,
    controlIconsEnabled: true,
    panEnabled: true,
    fit: true,
    center: true
  });

  // 當圖片放大縮小時，調整名稱的位置
  mapElement.addEventListener('pan-zoom', function () {
    updateLabelsPosition();
  });

  // 根據縮放比例來調整名稱的位置
  function updateLabelsPosition() {
    const scale = panZoom.getScale();
    const labels = document.querySelectorAll('.map-label');
    
    labels.forEach(label => {
      const offsetX = parseFloat(label.getAttribute('data-offset-x')) || 0;
      const offsetY = parseFloat(label.getAttribute('data-offset-y')) || 0;

      label.style.left = (parseFloat(label.style.left) * scale + offsetX) + 'px';
      label.style.top = (parseFloat(label.style.top) * scale + offsetY) + 'px';
    });
  }

  // 顯示或隱藏名稱
  const checkboxes = document.querySelectorAll('.toggle-label');
  checkboxes.forEach(checkbox => {
    checkbox.addEventListener('change', function () {
      const labelId = this.dataset.target;
      const label = document.getElementById(labelId);
      if (this.checked) {
        label.style.display = 'block';
      } else {
        label.style.display = 'none';
      }
    });
  });

  // 預設載入地圖
  updateLabelsPosition();
</script>

</body>
</html>
